# TASK-22.2: Add tests for `src/api/tasks.ts` - `listTasks` function

**Section**: 4. Unit Tests for Untested API Clients (Phase 2B)
**Subsection**: 4.3 Tasks API Client
**Task ID**: TASK-22.2
**Parent Task**: TASK-22
**Order**: 2 of 4

## Description

This task creates comprehensive unit tests for the `listTasks` function in the `src/api/tasks.ts` API client module. This function lists tasks as a simple array response.

The tests will verify:
- Successful JSON array responses
- Non-JSON responses
- Error responses

## Current State

- Test file should exist (from TASK-22.1)
- `listTasks` function exists in `src/api/tasks.ts`
- No tests currently exist for this function

**Important**: This task should be executed after TASK-22.1 is complete.

## Checklist

### Implementation Steps

- [ ] Step 1: Write tests for successful responses
  - [ ] Test: Successful JSON array response returns tasks array
  - [ ] Test: Response with correct content-type is parsed
  - [ ] Test: Tasks array structure is correct

- [ ] Step 2: Write tests for non-JSON response
  - [ ] Test: Non-JSON response logs error and throws
  - [ ] Test: Assert on thrown error, not logs
  - [ ] Test: Error message is clear

- [ ] Step 3: Write tests for error responses
  - [ ] Test: Error responses with JSON error payload propagate message
  - [ ] Test: Error responses without JSON use status text
  - [ ] Test: Error messages are clear

### Testing

- [ ] Write all test cases for `listTasks`
- [ ] Use MSW to mock API responses
- [ ] Run tests and verify all pass

## Related Tasks

- Parent: TASK-22
- Previous: TASK-22.1
- Next: TASK-22.3

## Definition of Done

### Task Type: TESTING TASK

**Definition of Done**: 

1. **Tests written**: All `listTasks` tests written
2. **Tests pass**: All tests pass
3. **Code committed and pushed**: Commit message: `test: add tests for listTasks function`
4. **User Story**: As a developer, I want tests for `listTasks` so that I can verify it works correctly
5. **Automated Tests**: All tests written and passing

**Tests are written, all tests pass, and test coverage meets project requirements**











