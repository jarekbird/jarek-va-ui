# TASK-9.4: Add tests for AgentConversationListView - Sorting, creation, and error states

**Section**: 3. Unit Tests for Untested Components (Phase 2A)
**Subsection**: 3.2 Agent Conversation Components
**Task ID**: TASK-9.4
**Parent Task**: TASK-9
**Order**: 4 of 4

## Description

This task adds comprehensive tests for sorting functionality, new conversation creation, and error/empty states in the `AgentConversationListView` component.

## Current State

- Test file should exist (from TASK-9.1)
- Initial load, pagination, and filtering tests should be complete
- Sorting, creation, and error handling functionality exists in the component
- No tests for these features currently exist

**Important**: This task should be executed after TASK-9.1, TASK-9.2, TASK-9.3 are complete.

## Checklist

### Implementation Steps

- [ ] Step 1: Write tests for sorting
  - [ ] Test: Sort by "Last Accessed" maps to `lastAccessedAt` backend field
  - [ ] Test: Sort by "Created Date" maps to `createdAt` backend field
  - [ ] Test: Sort by "Message Count" maps to `messageCount` backend field
  - [ ] Test: Sort order "Newest First" maps to `desc`
  - [ ] Test: Sort order "Oldest First" maps to `asc`
  - [ ] Test: Changing sort triggers API reload
  - [ ] Test: Changing sort order triggers API reload

- [ ] Step 2: Write tests for new conversation creation
  - [ ] Test: Clicking "+ New Agent Conversation" calls `createAgentConversation`
  - [ ] Test: Button shows "Creating..." during creation
  - [ ] Test: Button is disabled during creation
  - [ ] Test: After creation, navigates to `/agent-conversation/:id`
  - [ ] Test: After creation, reloads conversations list
  - [ ] Test: Error during creation shows error message

- [ ] Step 3: Write tests for error and empty states
  - [ ] Test: Network error displays friendly message and retry button
  - [ ] Test: 404 error displays appropriate message
  - [ ] Test: 500 error displays appropriate message
  - [ ] Test: Retry button calls `loadConversations` again
  - [ ] Test: Empty state message shown when no conversations
  - [ ] Test: "No conversations match your search criteria" shown when filters return no results

### Specific Requirements

- [ ] Requirement 1: Sorting tested (field and order mapping)
- [ ] Requirement 2: Creation tested
- [ ] Requirement 3: Error and empty states tested

### Testing

- [ ] Write all test cases
- [ ] Use MSW to mock API responses
- [ ] Use userEvent for user interactions
- [ ] Run tests and verify all pass
- [ ] Run full test suite: `npm test`
- [ ] Check test coverage

## Related Tasks

- Parent: TASK-9
- Previous: TASK-9.3
- Next: TASK-10

## Definition of Done

### Task Type: TESTING TASK

**Definition of Done**: 

1. **Tests written**: All sorting, creation, and error state tests written
2. **Tests pass**: All tests pass
3. **Coverage meets requirements**: Component has adequate test coverage
4. **Code committed and pushed**: Commit message: `test: add sorting, creation, and error state tests for AgentConversationListView`
5. **User Story**: As a developer, I want comprehensive tests for sorting, creation, and error handling
6. **Automated Tests**: All tests written and passing

**Tests are written, all tests pass, and test coverage meets project requirements**
