# Add Frontend Component Tests for Agent and Note-Taking Views

## Scope
`jarek-va-ui`.

## Subtasks
- Update or add tests for `ConversationDetails`, `AgentConversationDetails`, and `RepositoryFileBrowser`.
- Validate that feature flags hide/show agent controls as expected.
- Ensure that long histories and large file trees render without performance regressions in tests.

## Desired Outcomes

### Primary Outcomes
1. **Component Test Coverage**: All conversation and agent views covered by automated tests.

2. **Feature Flag Validation**: Tests verify feature flags properly gate UI elements.

3. **Performance Regression Prevention**: Tests detect performance issues with large datasets.

4. **UI Reliability**: Test suite ensures UI components work correctly in all scenarios.

### Success Criteria
- All components have tests
- Feature flag tests pass
- Performance tests pass
- Long history rendering works
- Large file tree rendering works
- Test coverage > 70%
- Tests run in CI

## User Stories

### As a Developer
- **Story 1**: I want component tests so that I can refactor UI confidently.
- **Story 2**: I want performance tests so that I know UI handles large datasets.

## Suggested Automated Tests

### Component Tests
1. **Rendering Tests**:
   ```typescript
   describe('AgentConversationDetails', () => {
     it('renders conversation messages', () => {
       // Test message rendering
     });
   });
   ```

2. **Feature Flag Tests** (covered in Task 38 expansion)
3. **Performance Tests**:
   ```typescript
   describe('Performance', () => {
     it('renders long conversation history efficiently', () => {
       const longHistory = generateMessages(1000);
       const start = performance.now();
       render(<AgentConversationDetails messages={longHistory} />);
       const duration = performance.now() - start;
       expect(duration).toBeLessThan(100);
     });
   });
   ```

## Inherent Risks

### Medium Risk
1. **Test Performance**:
   - **Risk**: Performance tests slow down test suite
   - **Mitigation**: Run performance tests separately, use realistic but limited data

2. **Component Complexity**:
   - **Risk**: Complex components difficult to test
   - **Mitigation**: Break into smaller components, test in isolation, use test utilities

### Low Risk
3. **Snapshot Drift**:
   - **Risk**: Snapshot tests break frequently
   - **Mitigation**: Use snapshots sparingly, update intentionally, review changes
