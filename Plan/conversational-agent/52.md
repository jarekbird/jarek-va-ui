# Update ElevenLabs Dashboard Configuration and Validate Integration

## Scope
ElevenLabs dashboard config, `elevenlabs-agent`.

## Subtasks
- Update the ElevenLabs agent configuration to point the webhook URL at the new `elevenlabs-agent` service (via Traefik).
- Ensure the correct secret (`WEBHOOK_SECRET` or equivalent) is configured on both ElevenLabs and `elevenlabs-agent`.
- Trigger a test interaction from the ElevenLabs dashboard to confirm that requests reach `/agent-tools` and are handled successfully.
- Verify that cursor-powered tools invoked by the agent follow the async flow and result in completion messages being pushed back to the agent.

## Desired Outcomes

### Primary Outcomes
1. **Webhook Configuration**: ElevenLabs agent correctly configured to call new service endpoint.

2. **Secret Alignment**: Webhook secrets match between ElevenLabs and backend, ensuring authentication works.

3. **End-to-End Validation**: Complete flow validated from ElevenLabs dashboard through to agent response.

4. **Integration Confidence**: Confirmation that all components work together correctly.

### Success Criteria
- Webhook URL points to correct endpoint
- Webhook secret matches on both sides
- Test interaction succeeds
- Requests reach `/agent-tools`
- Async cursor flow works
- Completion messages delivered
- Agent responds correctly
- Integration validated

## User Stories

### As a Developer
- **Story 1**: I want validated integration so that I know everything works together.
- **Story 2**: I want correct configuration so that webhooks are received properly.

### As a System Administrator
- **Story 3**: I want validated configuration so that I can deploy with confidence.

## Suggested Automated Tests

### Integration Tests
1. **Webhook Configuration Tests**:
   ```typescript
   describe('ElevenLabs Integration', () => {
     it('webhook URL is correct', () => {
       const webhookUrl = getElevenLabsWebhookUrl();
       expect(webhookUrl).toContain('/agent-tools');
       expect(webhookUrl).toMatch(/^https?:\/\//);
     });
   });
   ```

2. **End-to-End Validation**:
   ```typescript
   describe('End-to-End Flow', () => {
     it('completes full flow from dashboard', async () => {
       // Trigger from dashboard
       // Verify webhook received
       // Verify cursor execution
       // Verify callback
       // Verify agent response
     });
   });
   ```

## Inherent Risks

### High Risk
1. **Configuration Errors**:
   - **Risk**: Wrong webhook URL or secret causing integration failures
   - **Mitigation**: Validate configuration, test thoroughly, clear documentation

2. **Integration Failures**:
   - **Risk**: Components don't integrate correctly
   - **Mitigation**: End-to-end testing, monitoring, gradual rollout

### Medium Risk
3. **Secret Mismatch**:
   - **Risk**: Secrets don't match, causing authentication failures
   - **Mitigation**: Validate secrets, clear documentation, test authentication

4. **Dashboard Configuration Complexity**:
   - **Risk**: Dashboard configuration errors
   - **Mitigation**: Clear instructions, validation, testing

### Low Risk
5. **Test Environment Differences**:
   - **Risk**: Works in test but not production
   - **Mitigation**: Test in production-like environment, validate production config
