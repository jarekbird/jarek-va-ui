# Validate Data Model Alignment Across Services

## Scope
`cursor-runner`, `elevenlabs-agent`, `jarek-va-ui`.

## Subtasks
- Ensure `conversationId` format and type are consistent across Redis keys and APIs.
- Confirm task IDs used by cursor-runner map cleanly to `cursor_task:{taskId}` in elevenlabs-agent.
- Align timestamp formats (ISO 8601) between frontend and backend.

## Desired Outcomes

### Primary Outcomes
1. **Data Consistency**: All services use consistent data formats, preventing integration errors.

2. **ID Format Standardization**: Conversation and task IDs use consistent formats across services.

3. **Timestamp Alignment**: All timestamps use ISO 8601 format consistently.

4. **Integration Reliability**: Consistent data formats ensure reliable service integration.

### Success Criteria
- conversationId format consistent across all services
- Task ID mapping verified
- Timestamps in ISO 8601 format everywhere
- No data format mismatches
- Validation tests pass
- Documentation updated

## User Stories

### As a Developer
- **Story 1**: I want consistent data formats so that services integrate reliably.
- **Story 2**: I want standardized IDs so that I don't have format conversion issues.

### As a System Administrator
- **Story 3**: I want data consistency so that debugging is easier.

## Suggested Automated Tests

### Integration Tests
1. **ID Format Tests**:
   ```typescript
   describe('ID Format Consistency', () => {
     it('conversationId format matches across services', () => {
       const frontendId = 'conv-123';
       const backendId = frontendId;
       expect(backendId).toMatch(/^conv-\d+$/);
     });
   });
   ```

2. **Timestamp Format Tests**:
   ```typescript
   describe('Timestamp Format', () => {
     it('all timestamps use ISO 8601', () => {
       const timestamp = new Date().toISOString();
       expect(timestamp).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);
     });
   });
   ```

## Inherent Risks

### High Risk
1. **Format Mismatches**:
   - **Risk**: Different formats causing integration failures
   - **Mitigation**: Validation, tests, documentation, code review

2. **ID Collision**:
   - **Risk**: ID format issues causing collisions or lookup failures
   - **Mitigation**: Unique ID generation, format validation, tests

### Medium Risk
3. **Timestamp Parsing Errors**:
   - **Risk**: Different timestamp formats causing parsing errors
   - **Mitigation**: Standardize on ISO 8601, validation, parsing utilities

### Low Risk
4. **Documentation Drift**:
   - **Risk**: Documentation doesn't reflect actual formats
   - **Mitigation**: Keep docs updated, code comments, review
