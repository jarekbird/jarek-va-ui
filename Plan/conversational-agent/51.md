# Migrate Webhook Logic from jarek-va to elevenlabs-agent

- **Scope:** `elevenlabs-agent`, `jarek-va`.
- **Subtasks:**
  - Audit the existing `agent_tools_controller` (or equivalent) in `jarek-va` to catalog all supported tools and behaviors.
  - Reconcile differences between the legacy synchronous pattern and the new async callback-queue design.
  - Port only the necessary tool-routing logic into `elevenlabs-agent`â€™s `tool-router`/webhook implementation, ensuring it uses async cursor execution.
  - Add tests that compare representative legacy requests/responses against the new webhook to ensure behavioral equivalence where required.
  - Gate any remaining Rails-based webhook paths behind a feature flag or clearly mark them as deprecated.
