# Implement Frontend Feature Flag Checks

## Scope
`jarek-va-ui`.

## Subtasks
- Centralize a helper (e.g., `isElevenLabsEnabled()`) to read `VITE_ELEVENLABS_AGENT_ENABLED`.
- Hide all agent-specific UI (routes, nav items, controls) when feature is disabled.
- Write a small test to ensure the flag gating works.

## Desired Outcomes

### Primary Outcomes
1. **Centralized Flag Logic**: Single helper function for checking feature flag, ensuring consistent behavior.

2. **Complete UI Gating**: All agent-related UI hidden when flag is disabled, enabling dark release.

3. **Test Coverage**: Tests verify flag gating works correctly.

4. **Maintainability**: Easy to update flag logic in one place.

### Success Criteria
- Helper function implemented
- All agent UI respects flag
- Routes hidden when disabled
- Navigation items hidden when disabled
- Controls hidden when disabled
- Tests verify flag behavior
- No agent UI visible when disabled

## User Stories

### As a Developer
- **Story 1**: I want centralized flag logic so that I can easily control feature visibility.
- **Story 2**: I want complete UI gating so that I can deploy features safely.

### As a DevOps Engineer
- **Story 3**: I want feature flags so that I can enable features gradually.

## Suggested Automated Tests

### Unit Tests
1. **Flag Helper Tests**:
   ```typescript
   describe('isElevenLabsEnabled', () => {
     it('returns false when flag not set', () => {
       delete process.env.VITE_ELEVENLABS_AGENT_ENABLED;
       expect(isElevenLabsEnabled()).toBe(false);
     });
     
     it('returns true when flag is "true"', () => {
       process.env.VITE_ELEVENLABS_AGENT_ENABLED = 'true';
       expect(isElevenLabsEnabled()).toBe(true);
     });
   });
   ```

2. **UI Gating Tests**:
   ```typescript
   describe('UI Gating', () => {
     it('hides agent routes when disabled', () => {
       process.env.VITE_ELEVENLABS_AGENT_ENABLED = 'false';
       render(<App />);
       expect(screen.queryByText('Agent Conversations')).not.toBeInTheDocument();
     });
   });
   ```

## Inherent Risks

### Medium Risk
1. **Incomplete Gating**:
   - **Risk**: Some UI elements not gated, exposing features when disabled
   - **Mitigation**: Systematic review, tests, code review

2. **Flag Misconfiguration**:
   - **Risk**: Flag not set correctly, causing unexpected behavior
   - **Mitigation**: Default to false, validation, clear documentation

### Low Risk
3. **Performance Impact**:
   - **Risk**: Flag checks causing performance issues
   - **Mitigation**: Efficient checks, memoization if needed, performance testing
